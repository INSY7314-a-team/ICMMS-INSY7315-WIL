@model ICCMS_Web.Models.CreateUserViewModel

@{
    ViewData["Title"] = "Create New User";
    Layout = "_Layout";
}

<div class="user-management-container">
    <!-- Header Section -->
    <div class="user-dashboard-header">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="user-dashboard-title">
                    <i class="fas fa-user-plus me-3"></i>Create New User
                </h1>
                <p class="user-dashboard-subtitle">Add a new user to the system with appropriate role and permissions
                </p>
            </div>
            <div>
                <a href="@Url.Action("Index", "Users")" class="user-btn user-btn-secondary">
                    <i class="fas fa-arrow-left me-2"></i>Back to Users
                </a>
            </div>
        </div>
    </div>

    <!-- Create Form -->
    <div class="row">
        <div class="col-lg-8">
            <div class="user-form-container">
                <div class="user-form-header">
                    <h3 class="user-form-title">
                        <i class="fas fa-user-plus me-2"></i>User Information
                    </h3>
                </div>
                <div class="user-form-body">
                    <form asp-action="Create" method="post">
                        <div asp-validation-summary="ModelOnly" class="user-alert user-alert-danger" role="alert"></div>

                        <!-- Personal Information Section -->
                        <div class="form-section mb-4">
                            <h5 class="section-title mb-3">
                                <i class="fas fa-user me-2"></i>Personal Information
                            </h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="FullName" class="user-form-label">
                                            <i class="fas fa-user me-1"></i>Full Name *
                                        </label>
                                        <input asp-for="FullName" class="user-form-control"
                                            placeholder="Enter full name" required />
                                        <span asp-validation-for="FullName" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Email" class="user-form-label">
                                            <i class="fas fa-envelope me-1"></i>Email Address *
                                        </label>
                                        <input asp-for="Email" type="email" class="user-form-control"
                                            placeholder="Enter email address" required />
                                        <span asp-validation-for="Email" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Phone" class="user-form-label">
                                            <i class="fas fa-phone me-1"></i>Phone Number
                                        </label>
                                        <input asp-for="Phone" type="tel" class="user-form-control"
                                            placeholder="Enter phone number" />
                                        <span asp-validation-for="Phone" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Role" class="user-form-label">
                                            <i class="fas fa-user-tag me-1"></i>Role *
                                        </label>
                                        <select asp-for="Role" class="user-form-select" required>
                                            <option value="">Select a role</option>
                                            <option value="Admin">Admin</option>
                                            <option value="Project Manager">Project Manager</option>
                                            <option value="Contractor">Contractor</option>
                                            <option value="Client">Client</option>
                                        </select>
                                        <span asp-validation-for="Role" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Security Section -->
                        <div class="form-section mb-4">
                            <h5 class="section-title mb-3">
                                <i class="fas fa-shield-alt me-2"></i>Security Settings
                            </h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="Password" class="user-form-label">
                                            <i class="fas fa-lock me-1"></i>Password *
                                        </label>
                                        <input type="password" id="Password" name="Password" class="user-form-control"
                                            placeholder="Enter password" required />
                                        <div class="form-text" style="color: rgba(255, 255, 255, 0.7);">Password must be
                                            at least 6 characters long.</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="ConfirmPassword" class="user-form-label">
                                            <i class="fas fa-lock me-1"></i>Confirm Password *
                                        </label>
                                        <input type="password" id="ConfirmPassword" name="ConfirmPassword"
                                            class="user-form-control" placeholder="Confirm password" required />
                                        <span id="passwordMatchError" class="text-danger"
                                            style="display: none;">Passwords do not match.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="form-actions">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="form-info">
                                    <small style="color: rgba(255, 255, 255, 0.7);">
                                        <i class="fas fa-info-circle me-1"></i>
                                        All fields marked with * are required
                                    </small>
                                </div>
                                <div class="d-flex gap-2">
                                    <a href="@Url.Action("Index", "Users")" class="user-btn user-btn-secondary">
                                        <i class="fas fa-times me-1"></i>Cancel
                                    </a>
                                    <button type="submit" class="user-btn user-btn-primary">
                                        <i class="fas fa-user-plus me-1"></i>Create User
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Sidebar Info -->
        <div class="col-lg-4">
            <div class="user-form-container">
                <div class="user-form-header">
                    <h5 class="user-form-title">
                        <i class="fas fa-info-circle me-2"></i>Role Information
                    </h5>
                </div>
                <div class="user-form-body">
                    <div class="info-item mb-3">
                        <label class="info-label">Admin</label>
                        <div class="info-value">
                            <small style="color: rgba(255, 255, 255, 0.7);">Full system access and user management
                                capabilities</small>
                        </div>
                    </div>
                    <div class="info-item mb-3">
                        <label class="info-label">Project Manager</label>
                        <div class="info-value">
                            <small style="color: rgba(255, 255, 255, 0.7);">Project oversight and team
                                coordination</small>
                        </div>
                    </div>
                    <div class="info-item mb-3">
                        <label class="info-label">Contractor</label>
                        <div class="info-value">
                            <small style="color: rgba(255, 255, 255, 0.7);">Project execution and task
                                management</small>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Client</label>
                        <div class="info-value">
                            <small style="color: rgba(255, 255, 255, 0.7);">Project viewing and communication
                                access</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Tips -->
            <div class="user-form-container mt-3">
                <div class="user-form-header">
                    <h5 class="user-form-title">
                        <i class="fas fa-lightbulb me-2"></i>Quick Tips
                    </h5>
                </div>
                <div class="user-form-body">
                    <div class="info-item mb-2">
                        <small style="color: rgba(255, 255, 255, 0.7);">
                            <i class="fas fa-check me-1" style="color: #6BF178;"></i>
                            Use a strong password with at least 6 characters
                        </small>
                    </div>
                    <div class="info-item mb-2">
                        <small style="color: rgba(255, 255, 255, 0.7);">
                            <i class="fas fa-check me-1" style="color: #6BF178;"></i>
                            Ensure email address is valid and accessible
                        </small>
                    </div>
                    <div class="info-item">
                        <small style="color: rgba(255, 255, 255, 0.7);">
                            <i class="fas fa-check me-1" style="color: #6BF178;"></i>
                            Select appropriate role based on user responsibilities
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Include User Management CSS -->
<link rel="stylesheet" href="~/css/user-management.css" />

@section Scripts {
    <script>
        // Password confirmation validation
        document.getElementById('ConfirmPassword').addEventListener('input', function () {
            const password = document.getElementById('Password').value;
            const confirmPassword = this.value;
            const errorSpan = document.getElementById('passwordMatchError');

            if (confirmPassword && password !== confirmPassword) {
                errorSpan.style.display = 'block';
            } else {
                errorSpan.style.display = 'none';
            }
        });

        // Form validation
        document.querySelector('form').addEventListener('submit', function (e) {
            const password = document.getElementById('Password').value;
            const confirmPassword = document.getElementById('ConfirmPassword').value;

            if (password !== confirmPassword) {
                e.preventDefault();
                alert('Passwords do not match!');
                return false;
            }

            if (password.length < 6) {
                e.preventDefault();
                alert('Password must be at least 6 characters long!');
                return false;
            }
        });
    </script>
}
